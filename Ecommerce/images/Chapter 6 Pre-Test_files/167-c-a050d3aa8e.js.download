(window["canvasWebpackJsonp"]=window["canvasWebpackJsonp"]||[]).push([[167],{"+Gzo":function(e,t,n){"use strict"
n.d(t,"a",(function(){return p}))
var o=n("VTBJ")
var i=n("1OyB")
var a=n("vuIU")
var r=n("Ji7U")
var c=n("LK+K")
var s=n("q1tI")
var l=n.n(s)
var d=n("hPGw")
var b=l.a.createElement("path",{d:"M1468.2354,1807.0586 L112.9414,1807.0586 L112.9414,112.9406 L1016.4714,112.9406 L1016.4714,564.7056 L1468.2354,564.7056 L1468.2354,1807.0586 Z M1129.4124,136.3196 L1444.8554,451.7656 L1129.4124,451.7656 L1129.4124,136.3196 Z M1531.5944,378.8056 L1202.3724,49.5806 C1170.2964,17.6196 1127.7174,-0.0004 1082.5414,-0.0004 L0.0004,-0.0004 L0.0004,1919.9996 L1581.1754,1919.9996 L1581.1754,498.6346 C1581.1754,453.4586 1563.5574,410.8796 1531.5944,378.8056 L1531.5944,378.8056 Z M338.823,1242.353 L1129.412,1242.353 L1129.412,1129.413 L338.823,1129.413 L338.823,1242.353 Z M338.823,790.588 L1242.353,790.588 L1242.353,677.647 L338.823,677.647 L338.823,790.588 Z M338.823,1468.235 L790.588,1468.235 L790.588,1355.294 L338.823,1355.294 L338.823,1468.235 Z M338.823,1016.471 L1016.471,1016.471 L1016.471,903.53 L338.823,903.53 L338.823,1016.471 Z M338.823,564.706 L790.588,564.706 L790.588,451.765 L338.823,451.765 L338.823,564.706 Z",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(238)"})
var p=function(e){Object(r["a"])(n,e)
var t=Object(c["a"])(n)
function n(){Object(i["a"])(this,n)
return t.apply(this,arguments)}Object(a["a"])(n,[{key:"render",value:function(){return l.a.createElement(d["a"],Object.assign({},this.props,{name:"IconDocument",viewBox:"0 0 1920 1920",bidirectional:true}),b)}}])
n.displayName="IconDocumentLine"
return n}(s["Component"])
p.glyphName="document"
p.variant="Line"
p.propTypes=Object(o["a"])({},d["a"].propTypes)},"+Pml":function(e,t,n){"use strict"
n.d(t,"a",(function(){return p}))
var o=n("VTBJ")
var i=n("1OyB")
var a=n("vuIU")
var r=n("Ji7U")
var c=n("LK+K")
var s=n("q1tI")
var l=n.n(s)
var d=n("hPGw")
var b=l.a.createElement("path",{d:"M1807.05882,1637.70588 C1807.05882,1668.87765 1781.64706,1694.17647 1750.58824,1694.17647 L169.411765,1694.17647 C138.352941,1694.17647 112.941176,1668.87765 112.941176,1637.70588 L112.941176,225.941176 L703.849412,225.941176 L854.4,451.823529 L225.882353,451.823529 L225.882353,564.764706 L1807.05882,564.764706 L1807.05882,1637.70588 Z M990.268235,451.823529 L764.385882,113 L-5.68434189e-14,113 L-5.68434189e-14,1637.70588 C-5.68434189e-14,1731.10824 76.0094118,1807.11765 169.411765,1807.11765 L1750.58824,1807.11765 C1843.99059,1807.11765 1920,1731.10824 1920,1637.70588 L1920,451.823529 L990.268235,451.823529 Z",fillRule:"evenodd",stroke:"none",strokeWidth:"1"})
var p=function(e){Object(r["a"])(n,e)
var t=Object(c["a"])(n)
function n(){Object(i["a"])(this,n)
return t.apply(this,arguments)}Object(a["a"])(n,[{key:"render",value:function(){return l.a.createElement(d["a"],Object.assign({},this.props,{name:"IconFolder",viewBox:"0 0 1920 1920",bidirectional:true}),b)}}])
n.displayName="IconFolderLine"
return n}(s["Component"])
p.glyphName="folder"
p.variant="Line"
p.propTypes=Object(o["a"])({},d["a"].propTypes)},"5JRF":function(e,t,n){"use strict"
var o=n("rePB")
var i=n("1OyB")
var a=n("vuIU")
var r=n("md7G")
var c=n("foSv")
var s=n("Ji7U")
var l=n("q1tI")
var d=n.n(l)
var b=n("17x9")
var p=n.n(b)
var u=n("TSYQ")
var f=n.n(u)
var y=n("J2CL")
var h=n("nAyT")
var j=n("KgFQ")
var m=n("jtGx")
var g=n("VTBJ")
function v(e){var t=e.typography,n=e.colors,o=e.spacing
return Object(g["a"])({},t,{primaryInverseColor:n.textLightest,primaryColor:n.textDarkest,secondaryColor:n.textDark,secondaryInverseColor:n.textLight,warningColor:n.textWarning,brandColor:n.textBrand,errorColor:n.textDanger,successColor:n.textSuccess,alertColor:n.textAlert,paragraphMargin:"".concat(o.medium," 0")})}v.canvas=function(e){return{primaryColor:e["ic-brand-font-color-dark"],brandColor:e["ic-brand-primary"]}}
n.d(t,"a",(function(){return C}))
var _,U,k,B,w
var L={componentId:"cjUyb",template:function(e){return"\n\n.cjUyb_bGBk{font-family:".concat(e.fontFamily||"inherit","}\n\n.cjUyb_bGBk sub,.cjUyb_bGBk sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}\n\n.cjUyb_bGBk sup{top:-0.4em}\n\n.cjUyb_bGBk sub{bottom:-0.4em}\n\n.cjUyb_bGBk code,.cjUyb_bGBk pre{all:initial;animation:none 0s ease 0s 1 normal none running;backface-visibility:visible;background:transparent none repeat 0 0/auto auto padding-box border-box scroll;border:medium none currentColor;border-collapse:separate;border-image:none;border-radius:0;border-spacing:0;bottom:auto;box-shadow:none;box-sizing:content-box;caption-side:top;clear:none;clip:auto;color:#000;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-span:1;column-width:auto;columns:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;direction:ltr;display:inline;empty-cells:show;float:none;font-family:serif;font-family:").concat(e.fontFamilyMonospace||"inherit",";font-size:medium;font-stretch:normal;font-style:normal;font-variant:normal;font-weight:400;height:auto;hyphens:none;left:auto;letter-spacing:normal;line-height:normal;list-style:disc outside none;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;orphans:2;outline:medium none invert;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;position:static;right:auto;tab-size:8;table-layout:auto;text-align:left;text-align-last:auto;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;top:auto;transform:none;transform-origin:50% 50% 0;transform-style:flat;transition:none 0s ease 0s;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:auto;word-spacing:normal;z-index:auto}\n\n.cjUyb_bGBk em,.cjUyb_bGBk i{font-style:italic}\n\n.cjUyb_bGBk b,.cjUyb_bGBk strong{font-weight:").concat(e.fontWeightBold||"inherit","}\n\n.cjUyb_bGBk p{display:block;margin:").concat(e.paragraphMargin||"inherit",";padding:0}\n\ninput.cjUyb_bGBk[type]{-moz-appearance:none;-webkit-appearance:none;appearance:none;background:none;border:none;border-radius:0;box-shadow:none;box-sizing:border-box;color:inherit;display:block;height:auto;line-height:inherit;margin:0;outline:0;padding:0;text-align:start;width:100%}\n\n[dir=ltr] input.cjUyb_bGBk[type]{text-align:left}\n\n[dir=rtl] input.cjUyb_bGBk[type]{text-align:right}\n\n.cjUyb_bGBk:focus,input.cjUyb_bGBk[type]:focus{outline:none}\n\n.cjUyb_bGBk.cjUyb_qFsi,input.cjUyb_bGBk[type].cjUyb_qFsi{color:").concat(e.primaryColor||"inherit","}\n\n.cjUyb_bGBk.cjUyb_bLsb,input.cjUyb_bGBk[type].cjUyb_bLsb{color:").concat(e.secondaryColor||"inherit","}\n\n.cjUyb_bGBk.cjUyb_ezBQ,input.cjUyb_bGBk[type].cjUyb_ezBQ{color:").concat(e.primaryInverseColor||"inherit","}\n\n.cjUyb_bGBk.cjUyb_dlnd,input.cjUyb_bGBk[type].cjUyb_dlnd{color:").concat(e.secondaryInverseColor||"inherit","}\n\n.cjUyb_bGBk.cjUyb_cJLh,input.cjUyb_bGBk[type].cjUyb_cJLh{color:").concat(e.successColor||"inherit","}\n\n.cjUyb_bGBk.cjUyb_fpfC,input.cjUyb_bGBk[type].cjUyb_fpfC{color:").concat(e.brandColor||"inherit","}\n\n.cjUyb_bGBk.cjUyb_eHcp,input.cjUyb_bGBk[type].cjUyb_eHcp{color:").concat(e.warningColor||"inherit","}\n\n.cjUyb_bGBk.cjUyb_dwua,input.cjUyb_bGBk[type].cjUyb_dwua{color:").concat(e.errorColor||"inherit","}\n\n.cjUyb_bGBk.cjUyb_eZgl,input.cjUyb_bGBk[type].cjUyb_eZgl{color:").concat(e.alertColor||"inherit","}\n\n.cjUyb_bGBk.cjUyb_fbNi,input.cjUyb_bGBk[type].cjUyb_fbNi{-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;overflow-wrap:break-word;word-break:break-word}\n\n.cjUyb_bGBk.cjUyb_drST,input.cjUyb_bGBk[type].cjUyb_drST{font-weight:").concat(e.fontWeightNormal||"inherit","}\n\n.cjUyb_bGBk.cjUyb_pEgL,input.cjUyb_bGBk[type].cjUyb_pEgL{font-weight:").concat(e.fontWeightLight||"inherit","}\n\n.cjUyb_bGBk.cjUyb_bdMA,input.cjUyb_bGBk[type].cjUyb_bdMA{font-weight:").concat(e.fontWeightBold||"inherit","}\n\n.cjUyb_bGBk.cjUyb_ijuF,input.cjUyb_bGBk[type].cjUyb_ijuF{font-style:normal}\n\n.cjUyb_bGBk.cjUyb_fetN,input.cjUyb_bGBk[type].cjUyb_fetN{font-style:italic}\n\n.cjUyb_bGBk.cjUyb_dfBC,input.cjUyb_bGBk[type].cjUyb_dfBC{font-size:").concat(e.fontSizeXSmall||"inherit","}\n\n.cjUyb_bGBk.cjUyb_doqw,input.cjUyb_bGBk[type].cjUyb_doqw{font-size:").concat(e.fontSizeSmall||"inherit","}\n\n.cjUyb_bGBk.cjUyb_ycrn,input.cjUyb_bGBk[type].cjUyb_ycrn{font-size:").concat(e.fontSizeMedium||"inherit","}\n\n.cjUyb_bGBk.cjUyb_cMDj,input.cjUyb_bGBk[type].cjUyb_cMDj{font-size:").concat(e.fontSizeLarge||"inherit","}\n\n.cjUyb_bGBk.cjUyb_eoMd,input.cjUyb_bGBk[type].cjUyb_eoMd{font-size:").concat(e.fontSizeXLarge||"inherit","}\n\n.cjUyb_bGBk.cjUyb_fdca,input.cjUyb_bGBk[type].cjUyb_fdca{font-size:").concat(e.fontSizeXXLarge||"inherit","}\n\n.cjUyb_bGBk.cjUyb_fEWX,input.cjUyb_bGBk[type].cjUyb_fEWX{line-height:").concat(e.lineHeight||"inherit","}\n\n.cjUyb_bGBk.cjUyb_fNIu,input.cjUyb_bGBk[type].cjUyb_fNIu{line-height:").concat(e.lineHeightFit||"inherit","}\n\n.cjUyb_bGBk.cjUyb_dfDs,input.cjUyb_bGBk[type].cjUyb_dfDs{line-height:").concat(e.lineHeightCondensed||"inherit","}\n\n.cjUyb_bGBk.cjUyb_bDjL,input.cjUyb_bGBk[type].cjUyb_bDjL{line-height:").concat(e.lineHeightDouble||"inherit","}\n\n.cjUyb_bGBk.cjUyb_eQnG,input.cjUyb_bGBk[type].cjUyb_eQnG{letter-spacing:").concat(e.letterSpacingNormal||"inherit","}\n\n.cjUyb_bGBk.cjUyb_bbUA,input.cjUyb_bGBk[type].cjUyb_bbUA{letter-spacing:").concat(e.letterSpacingCondensed||"inherit","}\n\n.cjUyb_bGBk.cjUyb_bRWU,input.cjUyb_bGBk[type].cjUyb_bRWU{letter-spacing:").concat(e.letterSpacingExpanded||"inherit","}\n\n.cjUyb_bGBk.cjUyb_wZsr,input.cjUyb_bGBk[type].cjUyb_wZsr{text-transform:none}\n\n.cjUyb_bGBk.cjUyb_fCZK,input.cjUyb_bGBk[type].cjUyb_fCZK{text-transform:capitalize}\n\n.cjUyb_bGBk.cjUyb_dsRi,input.cjUyb_bGBk[type].cjUyb_dsRi{text-transform:uppercase}\n\n.cjUyb_bGBk.cjUyb_bLtD,input.cjUyb_bGBk[type].cjUyb_bLtD{text-transform:lowercase}")},root:"cjUyb_bGBk","color-primary":"cjUyb_qFsi","color-secondary":"cjUyb_bLsb","color-primary-inverse":"cjUyb_ezBQ","color-secondary-inverse":"cjUyb_dlnd","color-success":"cjUyb_cJLh","color-brand":"cjUyb_fpfC","color-warning":"cjUyb_eHcp","color-error":"cjUyb_dwua","color-alert":"cjUyb_eZgl","wrap-break-word":"cjUyb_fbNi","weight-normal":"cjUyb_drST","weight-light":"cjUyb_pEgL","weight-bold":"cjUyb_bdMA","style-normal":"cjUyb_ijuF","style-italic":"cjUyb_fetN","x-small":"cjUyb_dfBC",small:"cjUyb_doqw",medium:"cjUyb_ycrn",large:"cjUyb_cMDj","x-large":"cjUyb_eoMd","xx-large":"cjUyb_fdca","lineHeight-default":"cjUyb_fEWX","lineHeight-fit":"cjUyb_fNIu","lineHeight-condensed":"cjUyb_dfDs","lineHeight-double":"cjUyb_bDjL","letterSpacing-normal":"cjUyb_eQnG","letterSpacing-condensed":"cjUyb_bbUA","letterSpacing-expanded":"cjUyb_bRWU","transform-none":"cjUyb_wZsr","transform-capitalize":"cjUyb_fCZK","transform-uppercase":"cjUyb_dsRi","transform-lowercase":"cjUyb_bLtD"}
var C=(_=Object(h["a"])("7.0.0",null,"Use Text from ui-text instead."),U=Object(y["j"])(v,L),_(k=U(k=(w=B=function(e){Object(s["a"])(t,e)
function t(){Object(i["a"])(this,t)
return Object(r["a"])(this,Object(c["a"])(t).apply(this,arguments))}Object(a["a"])(t,[{key:"render",value:function(){var e
var n=this.props,i=n.wrap,a=n.weight,r=n.fontStyle,c=n.size,s=n.lineHeight,l=n.letterSpacing,b=n.transform,p=n.color,u=n.children
var y=Object(j["a"])(t,this.props)
return d.a.createElement(y,Object.assign({},Object(m["a"])(this.props,t.propTypes),{className:f()((e={},Object(o["a"])(e,L.root,true),Object(o["a"])(e,L[c],c),Object(o["a"])(e,L["wrap-".concat(i)],i),Object(o["a"])(e,L["weight-".concat(a)],a),Object(o["a"])(e,L["style-".concat(r)],r),Object(o["a"])(e,L["transform-".concat(b)],b),Object(o["a"])(e,L["lineHeight-".concat(s)],s),Object(o["a"])(e,L["letterSpacing-".concat(l)],l),Object(o["a"])(e,L["color-".concat(p)],p),e)),ref:this.props.elementRef}),u)}}])
t.displayName="Text"
return t}(l["Component"]),B.propTypes={as:p.a.elementType,wrap:p.a.oneOf(["normal","break-word"]),weight:p.a.oneOf(["normal","light","bold"]),fontStyle:p.a.oneOf(["italic","normal"]),size:p.a.oneOf(["x-small","small","medium","large","x-large","xx-large"]),lineHeight:p.a.oneOf(["default","fit","condensed","double"]),letterSpacing:p.a.oneOf(["normal","condensed","expanded"]),transform:p.a.oneOf(["none","capitalize","uppercase","lowercase"]),color:p.a.oneOf(["primary","secondary","primary-inverse","secondary-inverse","success","error","alert","warning","brand"]),children:p.a.node,elementRef:p.a.func},B.defaultProps={as:"span",wrap:"normal",size:"medium",letterSpacing:"normal",children:null,elementRef:void 0,color:void 0,transform:void 0,lineHeight:void 0,fontStyle:void 0,weight:void 0},w))||k)||k)},"Op/J":function(e,t,n){"use strict"
var o=n("An8g")
var i=n("VTBJ")
var a=n("M1Vv")
var r=n("q1tI")
var c=n.n(r)
var s=n("LvDl")
var l=n.n(s)
var d=n("ouhR")
var b=n.n(d)
var p=n("x1Tw")
var u=n("2LKJ")
var f=n.n(u)
var y=n("TU4e")
var h=n("5JRF")
var j=n("uSnb")
var m=n("Xx/m")
var g=n("ysUD")
var v=n("WfMV")
var _=n("Cf7h")
var U=n("VDZY")
var k=n("7Lu0")
var B=n("XHgw")
var w=n("IqBw")
n("17x9")
const L={Accept:"application/json+canvas-string-ids"}
function C(e,t){return p["a"].get("/api/v1/".concat(e,"/").concat(t,"/folders/root"),L)}function G(e){const t=new FormData
Object.keys(e).forEach(n=>t.append(n,e[n]))
return t}function x(e,t,n,o){const a=G(Object(i["a"])({},t.upload_params,{file:e}))
const r=Object(i["a"])({"Content-Type":"multipart/form-data"},L)
p["a"].post(t.upload_url,a,r).then(e=>n(e.data)).catch(e=>o(e))}function O(e,t,n,o){p["a"].post("/api/v1/folders/".concat(t,"/files"),{name:e.name,size:e.size,parent_folder_id:t,on_duplicate:"rename"},L).then(t=>x(e,t.data,n,o)).catch(e=>o(e))}var F=n("XGn+")
var I=n("dqQ7")
var S=n("yE80")
class D extends c.a.Component{constructor(e){var t
super(e)
t=this
this.populateCollectionsList=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
t.setState((function(t){let o=t.collections
const i=l.a.cloneDeep(o)
e.forEach(e=>{const t=this.formatFolderInfo(e,n)
i[t.id]=t
const o=e.parent_folder_id||0
const a=i[o].collections
if(!a.includes(t.id)){a.push(t.id)
i[o].collections=this.orderedIdsFromList(i,a)}})
return{collections:i}}))
e.forEach(e=>{t.state.openFolders.includes(e.parent_folder_id)&&t.getFolderData(e.id)})}
this.populateItemsList=e=>{this.setState((function(t){let n=t.items,o=t.collections
const i=l.a.cloneDeep(n)
const a=l.a.cloneDeep(o)
e.forEach(e=>{if(this.contentTypeIsAllowed(e["content-type"])){const t=this.formatFileInfo(e)
i[t.id]=t
const n=e.folder_id
const o=a[n].items
if(!o.includes(t.id)){o.push(t.id)
a[n].items=this.orderedIdsFromList(i,o)}}})
return{items:i,collections:a}}))}
this.onFolderToggle=e=>this.onFolderClick(e.id,e)
this.onFolderClick=(e,t)=>{const n=this.state.collections[e]
let o=[]
const i=this.state.openFolders
if(!n.locked&&i.includes(e))o=o.concat(i.filter(t=>t!==e))
else if(!n.locked){o=o.concat(i)
o.push(e)
n.collections.forEach(e=>this.getFolderData(e))}return this.setState({openFolders:o,uploadFolder:e})}
this.onFileClick=e=>{const t=this.findFolderForFile(e)
this.setState({uploadFolder:t&&t.id})
this.props.selectFile(this.state.items[e.id])}
this.onInputChange=e=>{e&&this.submitFile(e[0])}
this.submitFile=e=>{this.setState({uploading:true})
O(e,this.state.uploadFolder,this.onUploadSucceed,this.onUploadFail)}
this.onUploadSucceed=e=>{this.populateItemsList([e])
this.clearUploadInfo()
const t=this.state.collections[e.folder_id]
this.setSuccessMessage(a["a"].t("Success: File uploaded"))
0===b()("button:contains('".concat(e.display_name,"')")).length&&b()("button:contains('".concat(t&&t.name,"')")).click()
const n=b()("button:contains('".concat(e.display_name,"')"))
b()(".file-browser__tree").scrollTo(n)
n.click()}
this.onUploadFail=()=>{this.clearUploadInfo()
this.setFailureMessage(a["a"].t("File upload failed"))}
this.setSuccessMessage=e=>{Object(I["c"])(e)()}
this.setFailureMessage=e=>{Object(I["b"])(e)()}
this.selectLocalFile=()=>{this.uploadInput.click()}
this.state={collections:{0:{collections:[]}},items:{},openFolders:[],uploadFolder:null,uploading:false,loadingCount:0}}componentDidMount(){this.getRootFolders()}getContextName(e){return"courses"===e?a["a"].t("Course files"):a["a"].t("Group files")}getContextInfo(e){const t=Object(_["a"])(e)
if(t&&t[0]&&t[1]){const e=this.getContextName(t[0])
return{name:e,type:t[0],id:t[1]}}}getRootFolders(){this.props.useContextAssets&&this.getContextFolders()
this.getUserFolders()}getUserFolders(){this.getRootFolderData("users","self",{name:a["a"].t("My files")})}getContextFolders(){if(!ENV.context_asset_string)return
const e=this.getContextInfo(ENV.context_asset_string)
e&&e.type&&e.id&&this.getRootFolderData(e.type,e.id,{name:e.name})}increaseLoadingCount(){let e=this.state.loadingCount
e+=1
this.setState({loadingCount:e})}decreaseLoadingCount(){let e=this.state.loadingCount
e-=1
this.setState({loadingCount:e})}getRootFolderData(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}
this.increaseLoadingCount()
C(e,t).then(e=>this.populateRootFolder(e.data,n)).catch(e=>{this.decreaseLoadingCount()
e.response&&401!==e.response.status&&this.setFailureMessage(a["a"].t("Something went wrong"))})}populateRootFolder(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
this.decreaseLoadingCount()
this.populateCollectionsList([e],t)
this.getFolderData(e.id)}getFolderData(e){const t=this.state.collections
if(!t[e].locked){this.getPaginatedData(this.folderFileApiUrl(e,"folders"),this.populateCollectionsList)
this.getPaginatedData(this.folderFileApiUrl(e),this.populateItemsList)}}getPaginatedData(e,t){p["a"].get(e).then(e=>{t(e.data)
const n=Object(F["a"])(e.headers.link).next
n&&this.getPaginatedData(n,t)}).catch(e=>{console.error("Error fetching data from API")
console.error(e)})}folderFileApiUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"files"
return"/api/v1/folders/".concat(e,"/").concat(t)}contentTypeIsAllowed(e){for(const t of this.props.contentTypes)if(f()(e,t))return true
return false}formatFolderInfo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
const n=e.locked_for_user?a["a"].t("Locked"):null
const o=Object(i["a"])({api:e,id:e.id,collections:[],items:[],name:e.name,context:"/".concat(e.context_type.toLowerCase(),"s/").concat(e.context_id),canUpload:e.can_upload,locked:e.locked_for_user,descriptor:n},t)
const r=this.state.collections[e.id]
Object.assign(o,r&&{collections:r.collections,items:r.items})
return o}formatFileInfo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
const n=this.state.collections
const o=n[e.folder_id].context
const a=Object(i["a"])({api:e,id:e.id,name:e.display_name,thumbnail:e.thumbnail_url,src:"".concat(o,"/files/").concat(e.id,"/preview").concat(o.includes("user")?"?verifier=".concat(e.uuid):""),alt:e.display_name},t)
return a}orderedIdsFromList(e,t){try{const n=t.sort((t,n)=>S["a"].strings(e[t].name,e[n].name))
return n}catch(e){console.error(e)
return t}}findFolderForFile(e){const t=this.state.collections
const n=Object.keys(t).find(n=>{const o=t[n].items
if(o&&o.includes(e.id))return n})
return t[n]}clearUploadInfo(){this.setState({uploading:false})
this.uploadInput.value=""}renderUploadDialog(){if(!this.props.allowUpload)return null
const e=this.state.collections[this.state.uploadFolder]
const t=!e||e.locked||!e.canUpload
const n=t?Object(o["a"])(v["a"],{},void 0,a["a"].t("Upload not available for this folder")):""
const i=this.props.contentTypes.join(",")
return Object(o["a"])("div",{className:"image-upload__form"},void 0,c.a.createElement("input",{onChange:e=>this.onInputChange(e.target.files),ref:e=>{this.uploadInput=e},type:"file",accept:i,className:"hidden"}),Object(o["a"])(m["a"],{id:"image-upload__upload",onClick:this.selectLocalFile,disabled:t,variant:"ghost",icon:U["a"]},void 0,a["a"].t("Upload File")," ",n))}renderMask(){return this.state.uploading?Object(o["a"])(g["a"],{},void 0,Object(o["a"])(j["a"],{renderTitle:a["a"].t("File uploading")})):null}renderLoading(){return this.state.loadingCount>0?Object(o["a"])(j["a"],{renderTitle:a["a"].t("Loading folders"),size:"small"}):null}render(){const e=Object(o["a"])("div",{className:"file-browser__container"},void 0,Object(o["a"])(h["a"],{},void 0,a["a"].t("Available folders")),Object(o["a"])("div",{className:"file-browser__tree"},void 0,Object(o["a"])(y["a"],{collections:this.state.collections,items:this.state.items,size:"medium",onCollectionToggle:this.onFolderToggle,onCollectionClick:this.onFolderClick,onItemClick:this.onFileClick,treeLabel:a["a"].t("Folder tree"),rootId:0,showRootCollection:false,defaultExpanded:this.state.openFolders,collectionIconExpanded:k["a"],collectionIcon:B["a"],itemIcon:w["a"],selectionType:"single"}),this.renderMask(),this.renderLoading()),this.renderUploadDialog())
return e}}D.defaultProps={allowUpload:true,contentTypes:["*/*"],useContextAssets:true}
t["a"]=D},"XGn+":function(e,t,n){"use strict"
t["a"]=function(e){if(!e)return[]
const t={}
e.split(",").map(e=>e.split("; ")).forEach(e=>{const n=e[0].substring(1,e[0].length-1)
let o=e[1].split("=")
o=o[1]
o=o.substring(1,o.length-1)
t[o]=n})
return t}},cClk:function(e,t,n){"use strict"
n.d(t,"a",(function(){return o}))
function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"onChange"
var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"defaultValue"
return function(o,i,a){var r=e.apply(null,arguments)
if(r)return r
if(o[i]&&"function"!==typeof o[t])return new Error(["You provided a '".concat(i,"' prop without an '").concat(t,"' handler on '").concat(a,"'. This will render a controlled component. If the component should be uncontrolled and manage its own state, use '").concat(n,"'. Otherwise, set '").concat(t,"'.")].join(""))}}},eAd9:function(e,t,n){(function(t){var n=false
var o
var i
function a(){if("undefined"!==typeof o)return o
var e=document.documentElement
var t=document.createElement("div")
t.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;")
e.appendChild(t)
o=t.offsetWidth-t.clientWidth
e.removeChild(t)
return o}function r(){return document.documentElement.scrollHeight>window.innerHeight}function c(e){if("undefined"===typeof document||n)return
var t=document.documentElement
i=window.pageYOffset
r()?t.style.width="calc(100% - "+a()+"px)":t.style.width="100%"
t.style.position="fixed"
t.style.top=-i+"px"
t.style.overflow="hidden"
n=true}function s(){if("undefined"===typeof document||!n)return
var e=document.documentElement
e.style.width=""
e.style.position=""
e.style.top=""
e.style.overflow=""
window.scroll(0,i)
n=false}function l(){if(n){s()
return}c()}var d={on:c,off:s,toggle:l}
"undefined"!==typeof e.exports?e.exports=d:t.noScroll=d})(this)},ysUD:function(e,t,n){"use strict"
var o=n("VTBJ")
var i=n("rePB")
var a=n("1OyB")
var r=n("vuIU")
var c=n("Ji7U")
var s=n("LK+K")
var l=n("q1tI")
var d=n.n(l)
var b=n("17x9")
var p=n.n(b)
var u=n("TSYQ")
var f=n.n(u)
var y=n("eAd9")
var h=n.n(y)
var j=n("J2CL")
var m=n("sQ3t")
var g=n("jtGx")
function v(e){var t=e.colors,n=e.borders,o=e.stacking
return{zIndex:o.topmost,background:"rgba(255, 255, 255, 0.75)",borderColor:"transparent",focusBorderColor:t.borderBrand,borderRadius:n.radiusMedium,borderWidth:n.widthSmall}}v.canvas=function(e){return{focusBorderColor:e["ic-brand-primary"]}}
n.d(t,"a",(function(){return L}))
var _,U,k,B
var w={componentId:"fvvQs",template:function(e){return"\n\n.fvvQs_bGBk{background:".concat(e.background||"inherit",";border:").concat(e.borderWidth||"inherit"," solid ").concat(e.borderColor||"inherit",";border-radius:").concat(e.borderRadius||"inherit",";bottom:0;box-sizing:border-box;display:flex;justify-content:center;left:0;outline:none;overflow:auto;position:absolute;right:0;top:0;z-index:").concat(e.zIndex||"inherit","}\n\n.fvvQs_bGBk:focus{border-color:").concat(e.focusBorderColor||"inherit","}\n\n.fvvQs_cMOR{position:fixed}\n\n.fvvQs_dacV{align-items:flex-start}\n\n.fvvQs_cwzs{align-items:center}\n\n.fvvQs_cGWj{align-items:flex-end}\n\n.fvvQs_eFiI{align-items:stretch}")},root:"fvvQs_bGBk",fullscreen:"fvvQs_cMOR",top:"fvvQs_dacV",center:"fvvQs_cwzs",bottom:"fvvQs_cGWj",stretch:"fvvQs_eFiI"}
var L=(_=Object(j["j"])(v,w),_(U=(B=k=function(e){Object(c["a"])(n,e)
var t=Object(s["a"])(n)
function n(){var e
Object(a["a"])(this,n)
for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r]
e=t.call.apply(t,[this].concat(i))
e.handleElementRef=function(t){e.props.elementRef(t)}
e.contentRef=function(t){e._content=t}
return e}Object(r["a"])(n,[{key:"componentDidMount",value:function(){this.props.fullscreen&&h.a.on()}},{key:"componentWillUnmount",value:function(){this.props.fullscreen&&h.a.off()}},{key:"render",value:function(){var e
var t=Object(m["a"])(this.props.children,{ref:this.contentRef})
var a=f()((e={},Object(i["a"])(e,w.root,true),Object(i["a"])(e,w[this.props.placement],true),Object(i["a"])(e,w.fullscreen,this.props.fullscreen),e))
var r=Object(o["a"])({},Object(g["a"])(this.props,n.propTypes),{className:a,ref:this.handleElementRef})
if("function"===typeof this.props.onClick){r.onClick=this.props.onClick
r.tabIndex=-1}return d.a.createElement("span",r,t)}}])
n.displayName="Mask"
return n}(l["Component"]),k.propTypes={onDismiss:p.a.func,placement:p.a.oneOf(["top","center","bottom","stretch"]),fullscreen:p.a.bool,children:p.a.node,onClick:p.a.func,elementRef:p.a.func},k.defaultProps={placement:"center",fullscreen:false,onDismiss:void 0,children:null,onClick:void 0,elementRef:function(e){}},B))||U)}}])

//# sourceMappingURL=167-c-a050d3aa8e.js.map